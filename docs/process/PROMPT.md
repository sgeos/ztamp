# Prompt Staging Area

> **Navigation**: [Process](./README.md) | [Documentation Root](../README.md)

This file is a staging area for complex human-to-AI instructions. The human pilot drafts and refines prompts here before execution.

---

# Current Prompt

## Comments

Requested functionality has been verified as broadly correct.

Answers to questions in the reverse prompt.

1. I manually cleaned up existing data using the dialog.
2. PDF export expectations described below.

## Objectives

### Update Job Search Dashboard

How Contact Made should default to "Internet".

### Fix Date Filtering

Date filtering is broken and needs to be fixed.
See the error addendum notes at the end of this prompt for details.

### Update Captured Entry Display

Use the `down` function to display "Employer" information in Captured Entries.

### Implement Export to PDF

Only count forms in the listed period.
Before the TANF pages, there should be a cover page
that lists name, UPI, period covered, number of jobs applied
for, number via recruters, and total time spent on applications.

Every TANF form can support up to 10 entries.
Entries should be ordered from oldest to newest, 10 per page.
All TANF pages should be concatenated and in order.

After the TANF forms, screenshots should be included 1 per page.
Name, UPI, and the application information for the row
should be printed at the top of the page.

Everything should be concatenated into a single proof of job search packet.

- Cover page first.
- TANF forms second, 10 entries per page, oldest to newest entries.
- Screenshots with headers last, oldest to newest entries.

PDF should be exported to `secret`.

## Context

(no comment)

## Constraints

(no comment)

## Success Criteria

- Update job search dashboard as requested.
- Fix data filtering.
- Update captured entry display.
- Implement Export to PDF functionality.

## Notes

### Error Addendum

Errors generated by Phoenix when attempting to modify:

- From
- Uncheck to Present

```
[debug] HANDLE EVENT "toggle_to_present" in ZtampWeb.JobSearchLive
  Parameters: %{}
[debug] QUERY OK source="job_search_entries" db=4.9ms idle=1255.4ms
SELECT j0."id", j0."date", j0."employer_name", j0."employer_address", j0."applied_via_recruiter", j0."remote", j0."how_contact_made", j0."telephone_fax", j0."telephone_number", j0."internet_confirmation", j0."time_in", j0."time_out", j0."screenshot_path", j0."inserted_at", j0."updated_at" FROM "job_search_entries" AS j0 ORDER BY j0."inserted_at" DESC []
↳ ZtampWeb.JobSearchLive.handle_event/3, at: lib/ztamp_web/live/job_search_live.ex:161
[debug] Replied in 5ms
[debug] HANDLE EVENT "filter_entries" in ZtampWeb.JobSearchLive
  Parameters: %{"_target" => ["undefined"], "from" => "2026-02-21"}
[error] GenServer #PID<0.1164.0> terminating
** (FunctionClauseError) no function clause matching in ZtampWeb.JobSearchLive.handle_event/3
    (ztamp 0.1.0) lib/ztamp_web/live/job_search_live.ex:42: ZtampWeb.JobSearchLive.handle_event("filter_entries", %{"_target" => ["undefined"], "from" => "2026-02-21"}, #Phoenix.LiveView.Socket<id: "phx-GJYR0gMRInCkSwBH", endpoint: ZtampWeb.Endpoint, view: ZtampWeb.JobSearchLive, parent_pid: nil, root_pid: #PID<0.1164.0>, router: ZtampWeb.Router, assigns: %{remote: false, form: %Phoenix.HTML.Form{source: #Ecto.Changeset<action: nil, changes: %{date: ~D[2026-02-20], how_contact_made: "Online", telephone_fax: "O", time_in: "13:43", time_out: "13:43"}, errors: [employer_name: {"can't be blank", [validation: :required]}, employer_address: {"can't be blank", [validation: :required]}, screenshot_path: {"can't be blank", [validation: :required]}], data: #Ztamp.JobSearch.Entry<>, valid?: false, ...>, impl: Phoenix.HTML.FormData.Ecto.Changeset, id: "entry", name: "entry", data: %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:built, "job_search_entries">, id: nil, date: nil, employer_name: nil, employer_address: nil, applied_via_recruiter: false, remote: false, how_contact_made: nil, telephone_fax: nil, telephone_number: nil, internet_confirmation: nil, time_in: nil, time_out: nil, screenshot_path: nil, inserted_at: nil, updated_at: nil}, action: nil, hidden: [], params: %{"date" => "2026-02-20", "how_contact_made" => "Online", "telephone_fax" => "O", "time_in" => "13:43", "time_out" => "13:43"}, errors: [], options: [method: "post"], index: nil}, __changed__: %{}, flash: %{}, live_action: nil, entries: [%Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 23, date: ~D[2026-02-20], employer_name: "Howrecruit", employer_address: "New York, NY", applied_via_recruiter: true, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:19", time_out: "12:21", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T202111877713.png", inserted_at: ~U[2026-02-20 20:21:12Z], updated_at: ~U[2026-02-20 21:42:33Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 22, date: ~D[2026-02-20], employer_name: "Electrify America", employer_address: "United States", applied_via_recruiter: false, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:17", time_out: "12:19", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T201917546654.png", inserted_at: ~U[2026-02-20 20:19:17Z], updated_at: ~U[2026-02-20 21:41:45Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 21, date: ~D[2026-02-20], employer_name: "Visionaire Partners", employer_address: "United States", applied_via_recruiter: true, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:16", time_out: "12:17", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T201752751832.png", inserted_at: ~U[2026-02-20 20:17:53Z], updated_at: ~U[2026-02-20 21:41:20Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 20, ...}, ...], ...}, ...>)
    (phoenix_live_view 1.1.24) lib/phoenix_live_view/channel.ex:530: anonymous fn/3 in Phoenix.LiveView.Channel.view_handle_event/3
    (telemetry 1.3.0) /Users/bsechter/projects/tanf/ztamp/deps/telemetry/src/telemetry.erl:324: :telemetry.span/3
    (phoenix_live_view 1.1.24) lib/phoenix_live_view/channel.ex:260: Phoenix.LiveView.Channel.handle_info/2
    (stdlib 7.1) gen_server.erl:2434: :gen_server.try_handle_info/3
    (stdlib 7.1) gen_server.erl:2420: :gen_server.handle_msg/3
    (stdlib 7.1) proc_lib.erl:333: :proc_lib.init_p_do_apply/3
Process Label: {Phoenix.LiveView, ZtampWeb.JobSearchLive, "lv:phx-GJYR0gMRInCkSwBH"}
Last message: %Phoenix.Socket.Message{topic: "lv:phx-GJYR0gMRInCkSwBH", event: "event", payload: %{"event" => "filter_entries", "meta" => %{"_target" => "undefined"}, "type" => "form", "uploads" => %{}, "value" => "from=2026-02-21"}, ref: "257", join_ref: "254"}
State: %{socket: #Phoenix.LiveView.Socket<id: "phx-GJYR0gMRInCkSwBH", endpoint: ZtampWeb.Endpoint, view: ZtampWeb.JobSearchLive, parent_pid: nil, root_pid: #PID<0.1164.0>, router: ZtampWeb.Router, assigns: %{remote: false, form: %Phoenix.HTML.Form{source: #Ecto.Changeset<action: nil, changes: %{date: ~D[2026-02-20], how_contact_made: "Online", telephone_fax: "O", time_in: "13:43", time_out: "13:43"}, errors: [employer_name: {"can't be blank", [validation: :required]}, employer_address: {"can't be blank", [validation: :required]}, screenshot_path: {"can't be blank", [validation: :required]}], data: #Ztamp.JobSearch.Entry<>, valid?: false, ...>, impl: Phoenix.HTML.FormData.Ecto.Changeset, id: "entry", name: "entry", data: %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:built, "job_search_entries">, id: nil, date: nil, employer_name: nil, employer_address: nil, applied_via_recruiter: false, remote: false, how_contact_made: nil, telephone_fax: nil, telephone_number: nil, internet_confirmation: nil, time_in: nil, time_out: nil, screenshot_path: nil, inserted_at: nil, updated_at: nil}, action: nil, hidden: [], params: %{"date" => "2026-02-20", "how_contact_made" => "Online", "telephone_fax" => "O", "time_in" => "13:43", "time_out" => "13:43"}, errors: [], options: [method: "post"], index: nil}, __changed__: %{}, flash: %{}, live_action: nil, entries: [%Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 23, date: ~D[2026-02-20], employer_name: "Howrecruit", employer_address: "New York, NY", applied_via_recruiter: true, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:19", time_out: "12:21", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T202111877713.png", inserted_at: ~U[2026-02-20 20:21:12Z], updated_at: ~U[2026-02-20 21:42:33Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 22, date: ~D[2026-02-20], employer_name: "Electrify America", employer_address: "United States", applied_via_recruiter: false, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:17", time_out: "12:19", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T201917546654.png", inserted_at: ~U[2026-02-20 20:19:17Z], updated_at: ~U[2026-02-20 21:41:45Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 21, date: ~D[2026-02-20], employer_name: "Visionaire Partners", employer_address: "United States", applied_via_recruiter: true, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:16", time_out: "12:17", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T201752751832.png", inserted_at: ~U[2026-02-20 20:17:53Z], updated_at: ~U[2026-02-20 21:41:20Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, ...}, ...], ...}, ...>, components: {%{}, %{}, 1}, topic: "lv:phx-GJYR0gMRInCkSwBH", serializer: Phoenix.Socket.V2.JSONSerializer, join_ref: "254", fingerprints: {132501397253196368392018436348917827835, %{0 => {274539278288705588891746139100275659187, %{1 => {206696669496405741581457425143711119626, %{}}, 2 => {260482352136919666940273247799985974220, %{0 => {29312806414300819528906065178411154871, %{}}}}}}, 4 => {228154321549868190741429220942044674989, %{0 => {146247770442471852902657083141860675991, %{2 => {141298696294123097083892551870735621221, %{}}}}}}, 6 => {146247770442471852902657083141860675991, %{2 => {176965370633324821916140557488359641996, %{}}}}, 7 => {138871855391179141029237768286486096524, (truncated)
[debug] MOUNT ZtampWeb.JobSearchLive
  Parameters: %{}
  Session: %{"_csrf_token" => "MrDey5TtI3D4YJWL8dVw0IB5"}
[debug] QUERY OK source="job_search_entries" db=1.8ms queue=0.3ms idle=1264.4ms
SELECT j0."id", j0."date", j0."employer_name", j0."employer_address", j0."applied_via_recruiter", j0."remote", j0."how_contact_made", j0."telephone_fax", j0."telephone_number", j0."internet_confirmation", j0."time_in", j0."time_out", j0."screenshot_path", j0."inserted_at", j0."updated_at" FROM "job_search_entries" AS j0 WHERE (j0."date" <= $1) ORDER BY j0."inserted_at" DESC [~D[2026-02-20]]
↳ ZtampWeb.JobSearchLive.mount/3, at: lib/ztamp_web/live/job_search_live.ex:18
[debug] Replied in 3ms
[debug] HANDLE EVENT "filter_entries" in ZtampWeb.JobSearchLive
  Parameters: %{"_target" => ["from"], "from" => "2026-02-19"}
[error] GenServer #PID<0.1165.0> terminating
** (FunctionClauseError) no function clause matching in ZtampWeb.JobSearchLive.handle_event/3
    (ztamp 0.1.0) lib/ztamp_web/live/job_search_live.ex:42: ZtampWeb.JobSearchLive.handle_event("filter_entries", %{"_target" => ["from"], "from" => "2026-02-19"}, #Phoenix.LiveView.Socket<id: "phx-GJYR0gMRInCkSwBH", endpoint: ZtampWeb.Endpoint, view: ZtampWeb.JobSearchLive, parent_pid: nil, root_pid: #PID<0.1165.0>, router: ZtampWeb.Router, assigns: %{remote: false, form: %Phoenix.HTML.Form{source: #Ecto.Changeset<action: nil, changes: %{date: ~D[2026-02-20], how_contact_made: "Online", telephone_fax: "O", time_in: "13:44", time_out: "13:44"}, errors: [employer_name: {"can't be blank", [validation: :required]}, employer_address: {"can't be blank", [validation: :required]}, screenshot_path: {"can't be blank", [validation: :required]}], data: #Ztamp.JobSearch.Entry<>, valid?: false, ...>, impl: Phoenix.HTML.FormData.Ecto.Changeset, id: "entry", name: "entry", data: %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:built, "job_search_entries">, id: nil, date: nil, employer_name: nil, employer_address: nil, applied_via_recruiter: false, remote: false, how_contact_made: nil, telephone_fax: nil, telephone_number: nil, internet_confirmation: nil, time_in: nil, time_out: nil, screenshot_path: nil, inserted_at: nil, updated_at: nil}, action: nil, hidden: [], params: %{"date" => "2026-02-20", "how_contact_made" => "Online", "telephone_fax" => "O", "time_in" => "13:44", "time_out" => "13:44"}, errors: [], options: [method: "post"], index: nil}, __changed__: %{}, flash: %{}, live_action: nil, entries: [%Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 23, date: ~D[2026-02-20], employer_name: "Howrecruit", employer_address: "New York, NY", applied_via_recruiter: true, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:19", time_out: "12:21", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T202111877713.png", inserted_at: ~U[2026-02-20 20:21:12Z], updated_at: ~U[2026-02-20 21:42:33Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 22, date: ~D[2026-02-20], employer_name: "Electrify America", employer_address: "United States", applied_via_recruiter: false, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:17", time_out: "12:19", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T201917546654.png", inserted_at: ~U[2026-02-20 20:19:17Z], updated_at: ~U[2026-02-20 21:41:45Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 21, date: ~D[2026-02-20], employer_name: "Visionaire Partners", employer_address: "United States", applied_via_recruiter: true, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:16", time_out: "12:17", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T201752751832.png", inserted_at: ~U[2026-02-20 20:17:53Z], updated_at: ~U[2026-02-20 21:41:20Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 20, ...}, ...], ...}, ...>)
    (phoenix_live_view 1.1.24) lib/phoenix_live_view/channel.ex:530: anonymous fn/3 in Phoenix.LiveView.Channel.view_handle_event/3
    (telemetry 1.3.0) /Users/bsechter/projects/tanf/ztamp/deps/telemetry/src/telemetry.erl:324: :telemetry.span/3
    (phoenix_live_view 1.1.24) lib/phoenix_live_view/channel.ex:260: Phoenix.LiveView.Channel.handle_info/2
    (stdlib 7.1) gen_server.erl:2434: :gen_server.try_handle_info/3
    (stdlib 7.1) gen_server.erl:2420: :gen_server.handle_msg/3
    (stdlib 7.1) proc_lib.erl:333: :proc_lib.init_p_do_apply/3
Process Label: {Phoenix.LiveView, ZtampWeb.JobSearchLive, "lv:phx-GJYR0gMRInCkSwBH"}
Last message: %Phoenix.Socket.Message{topic: "lv:phx-GJYR0gMRInCkSwBH", event: "event", payload: %{"event" => "filter_entries", "meta" => %{"_target" => "from"}, "type" => "form", "uploads" => %{}, "value" => "from=2026-02-19"}, ref: "259", join_ref: "258"}
State: %{socket: #Phoenix.LiveView.Socket<id: "phx-GJYR0gMRInCkSwBH", endpoint: ZtampWeb.Endpoint, view: ZtampWeb.JobSearchLive, parent_pid: nil, root_pid: #PID<0.1165.0>, router: ZtampWeb.Router, assigns: %{remote: false, form: %Phoenix.HTML.Form{source: #Ecto.Changeset<action: nil, changes: %{date: ~D[2026-02-20], how_contact_made: "Online", telephone_fax: "O", time_in: "13:44", time_out: "13:44"}, errors: [employer_name: {"can't be blank", [validation: :required]}, employer_address: {"can't be blank", [validation: :required]}, screenshot_path: {"can't be blank", [validation: :required]}], data: #Ztamp.JobSearch.Entry<>, valid?: false, ...>, impl: Phoenix.HTML.FormData.Ecto.Changeset, id: "entry", name: "entry", data: %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:built, "job_search_entries">, id: nil, date: nil, employer_name: nil, employer_address: nil, applied_via_recruiter: false, remote: false, how_contact_made: nil, telephone_fax: nil, telephone_number: nil, internet_confirmation: nil, time_in: nil, time_out: nil, screenshot_path: nil, inserted_at: nil, updated_at: nil}, action: nil, hidden: [], params: %{"date" => "2026-02-20", "how_contact_made" => "Online", "telephone_fax" => "O", "time_in" => "13:44", "time_out" => "13:44"}, errors: [], options: [method: "post"], index: nil}, __changed__: %{}, flash: %{}, live_action: nil, entries: [%Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 23, date: ~D[2026-02-20], employer_name: "Howrecruit", employer_address: "New York, NY", applied_via_recruiter: true, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:19", time_out: "12:21", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T202111877713.png", inserted_at: ~U[2026-02-20 20:21:12Z], updated_at: ~U[2026-02-20 21:42:33Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 22, date: ~D[2026-02-20], employer_name: "Electrify America", employer_address: "United States", applied_via_recruiter: false, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:17", time_out: "12:19", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T201917546654.png", inserted_at: ~U[2026-02-20 20:19:17Z], updated_at: ~U[2026-02-20 21:41:45Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, id: 21, date: ~D[2026-02-20], employer_name: "Visionaire Partners", employer_address: "United States", applied_via_recruiter: true, remote: true, how_contact_made: "Internet", telephone_fax: "O", telephone_number: nil, internet_confirmation: nil, time_in: "12:16", time_out: "12:17", screenshot_path: "/Users/bsechter/projects/tanf/secret/screenshots/20260220T201752751832.png", inserted_at: ~U[2026-02-20 20:17:53Z], updated_at: ~U[2026-02-20 21:41:20Z]}, %Ztamp.JobSearch.Entry{__meta__: #Ecto.Schema.Metadata<:loaded, "job_search_entries">, ...}, ...], ...}, ...>, components: {%{}, %{}, 1}, topic: "lv:phx-GJYR0gMRInCkSwBH", serializer: Phoenix.Socket.V2.JSONSerializer, join_ref: "258", fingerprints: {132501397253196368392018436348917827835, %{0 => {274539278288705588891746139100275659187, %{1 => {206696669496405741581457425143711119626, %{}}, 2 => {260482352136919666940273247799985974220, %{0 => {29312806414300819528906065178411154871, %{}}}}}}, 4 => {228154321549868190741429220942044674989, %{0 => {146247770442471852902657083141860675991, %{2 => {141298696294123097083892551870735621221, %{}}}}}}, 6 => {146247770442471852902657083141860675991, %{2 => {176965370633324821916140557488359641996, %{}}}}, 7 => {138871855391179141029237768286486096524, %{3 => {1 (truncated)
[debug] MOUNT ZtampWeb.JobSearchLive
  Parameters: %{}
  Session: %{"_csrf_token" => "MrDey5TtI3D4YJWL8dVw0IB5"}
[debug] QUERY OK source="job_search_entries" db=0.7ms idle=1361.6ms
SELECT j0."id", j0."date", j0."employer_name", j0."employer_address", j0."applied_via_recruiter", j0."remote", j0."how_contact_made", j0."telephone_fax", j0."telephone_number", j0."internet_confirmation", j0."time_in", j0."time_out", j0."screenshot_path", j0."inserted_at", j0."updated_at" FROM "job_search_entries" AS j0 WHERE (j0."date" <= $1) ORDER BY j0."inserted_at" DESC [~D[2026-02-20]]
↳ ZtampWeb.JobSearchLive.mount/3, at: lib/ztamp_web/live/job_search_live.ex:18
```
